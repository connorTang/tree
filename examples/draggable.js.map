{"version":3,"sources":["webpack:///./examples/util.js?9121*","webpack:///./examples/draggable.js","webpack:///./examples/draggable.less?4737"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;;AAEA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,oBAAmB,OAAO;AAC1B;AACA,iBAAgB,2CAA2C;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA,YAAW;AACX;;AAEA,4BAA2B,qBAAqB;AAChD;AACA;AACA,QAAO;AACP;AACA;;AAEA,kBAAiB,qBAAqB;AACtC;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;AACA,E;;;;;;;;;;ACxMA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,uCAAsC,uCAAuC,kBAAkB;;AAE/F,mCAAkC,0BAA0B,0CAA0C,gBAAgB,OAAO,kBAAkB,EAAE,aAAa,EAAE,OAAO,wBAAwB,EAAE;;AAEjM;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH,yCAAwC;AACxC;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,mCAAmC;AAChD;AACA;AACA;AACA,oEAAmE,mCAAmC;AACtG,QAAO;AACP;AACA;AACA;AACA,QAAO,8BAA8B;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS,mCAAmC;AAC5C;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED,wH;;;;;;ACpIA,0C","file":"draggable.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.generateData = generateData;\nexports.calcTotal = calcTotal;\nexports.isInclude = isInclude;\nexports.filterParentPosition = filterParentPosition;\nexports.getFilterExpandedKeys = getFilterExpandedKeys;\nexports.getRadioSelectKeys = getRadioSelectKeys;\n/* eslint no-loop-func: 0*/\n\nfunction generateData() {\n  var x = arguments.length <= 0 || arguments[0] === undefined ? 3 : arguments[0];\n  var y = arguments.length <= 1 || arguments[1] === undefined ? 2 : arguments[1];\n  var z = arguments.length <= 2 || arguments[2] === undefined ? 1 : arguments[2];\n  var gData = arguments.length <= 3 || arguments[3] === undefined ? [] : arguments[3];\n\n  // x：每一级下的节点总数。y：每级节点里有y个节点、存在子节点。z：树的level层级数（0表示一级）\n  function _loop(_level, _preKey, _tns) {\n    var preKey = _preKey || '0';\n    var tns = _tns || gData;\n\n    var children = [];\n    for (var i = 0; i < x; i++) {\n      var key = preKey + '-' + i;\n      tns.push({ title: key + '-label', key: key + '-key' });\n      if (i < y) {\n        children.push(key);\n      }\n    }\n    if (_level < 0) {\n      return tns;\n    }\n    var __level = _level - 1;\n    children.forEach(function (key, index) {\n      tns[index].children = [];\n      return _loop(__level, key, tns[index].children);\n    });\n  }\n  _loop(z);\n  return gData;\n}\nfunction calcTotal() {\n  var x = arguments.length <= 0 || arguments[0] === undefined ? 3 : arguments[0];\n  var y = arguments.length <= 1 || arguments[1] === undefined ? 2 : arguments[1];\n  var z = arguments.length <= 2 || arguments[2] === undefined ? 1 : arguments[2];\n\n  /* eslint no-param-reassign:0*/\n  var rec = function rec(n) {\n    return n >= 0 ? x * Math.pow(y, n--) + rec(n) : 0;\n  };\n  return rec(z + 1);\n}\nconsole.log('总节点数（单个tree）：', calcTotal());\n// 性能测试：总节点数超过 2000（z要小）明显感觉慢。z 变大时，递归多，会卡死。\n\nvar gData = exports.gData = generateData();\n\nfunction isInclude(smallArray, bigArray) {\n  return smallArray.every(function (ii, i) {\n    return ii === bigArray[i];\n  });\n}\n// console.log(isInclude(['0', '1'], ['0', '10', '1']));\n\n// arr.length === 628, use time: ~20ms\nfunction filterParentPosition(arr) {\n  var levelObj = {};\n  arr.forEach(function (item) {\n    var posLen = item.split('-').length;\n    if (!levelObj[posLen]) {\n      levelObj[posLen] = [];\n    }\n    levelObj[posLen].push(item);\n  });\n  var levelArr = Object.keys(levelObj).sort();\n\n  var _loop2 = function _loop2(i) {\n    if (levelArr[i + 1]) {\n      levelObj[levelArr[i]].forEach(function (ii) {\n        var _loop3 = function _loop3(j) {\n          levelObj[levelArr[j]].forEach(function (_i, index) {\n            if (isInclude(ii.split('-'), _i.split('-'))) {\n              levelObj[levelArr[j]][index] = null;\n            }\n          });\n          levelObj[levelArr[j]] = levelObj[levelArr[j]].filter(function (p) {\n            return p;\n          });\n        };\n\n        for (var j = i + 1; j < levelArr.length; j++) {\n          _loop3(j);\n        }\n      });\n    }\n  };\n\n  for (var i = 0; i < levelArr.length; i++) {\n    _loop2(i);\n  }\n  var nArr = [];\n  levelArr.forEach(function (i) {\n    nArr = nArr.concat(levelObj[i]);\n  });\n  return nArr;\n}\n// console.log(filterParentPosition(['0-2', '0-3-3', '0-10', '0-10-0', '0-0-1', '0-0', '0-1-1', '0-1']));\n\nfunction loopData(data, callback) {\n  var loop = function loop(d) {\n    var level = arguments.length <= 1 || arguments[1] === undefined ? 0 : arguments[1];\n\n    d.forEach(function (item, index) {\n      var pos = level + '-' + index;\n      if (item.children) {\n        loop(item.children, pos);\n      }\n      callback(item, index, pos);\n    });\n  };\n  loop(data);\n}\n\nfunction spl(str) {\n  return str.split('-');\n}\nfunction splitLen(str) {\n  return str.split('-').length;\n}\n\nfunction getFilterExpandedKeys(data, expandedKeys) {\n  var expandedPosArr = [];\n  loopData(data, function (item, index, pos) {\n    if (expandedKeys.indexOf(item.key) > -1) {\n      expandedPosArr.push(pos);\n    }\n  });\n  var filterExpandedKeys = [];\n  loopData(data, function (item, index, pos) {\n    expandedPosArr.forEach(function (p) {\n      if ((splitLen(pos) < splitLen(p) && p.indexOf(pos) === 0 || pos === p) && filterExpandedKeys.indexOf(item.key) === -1) {\n        filterExpandedKeys.push(item.key);\n      }\n    });\n  });\n  return filterExpandedKeys;\n}\n\nfunction isSibling(pos, pos1) {\n  pos.pop();\n  pos1.pop();\n  return pos.join(',') === pos1.join(',');\n}\n\nfunction getRadioSelectKeys(data, selectedKeys, key) {\n  var res = [];\n  var pkObjArr = [];\n  var selPkObjArr = [];\n  loopData(data, function (item, index, pos) {\n    if (selectedKeys.indexOf(item.key) > -1) {\n      pkObjArr.push([pos, item.key]);\n    }\n    if (key && key === item.key) {\n      selPkObjArr.push(pos, item.key);\n    }\n  });\n  var lenObj = {};\n  var getPosKey = function getPosKey(pos, k) {\n    var posLen = splitLen(pos);\n    if (!lenObj[posLen]) {\n      lenObj[posLen] = [[pos, k]];\n    } else {\n      lenObj[posLen].forEach(function (pkArr, i) {\n        if (isSibling(spl(pkArr[0]), spl(pos))) {\n          // 后来覆盖前者\n          lenObj[posLen][i] = [pos, k];\n        } else if (spl(pkArr[0]) !== spl(pos)) {\n          lenObj[posLen].push([pos, k]);\n        }\n      });\n    }\n  };\n  pkObjArr.forEach(function (pk) {\n    getPosKey(pk[0], pk[1]);\n  });\n  if (key) {\n    getPosKey(selPkObjArr[0], selPkObjArr[1]);\n  }\n\n  Object.keys(lenObj).forEach(function (item) {\n    lenObj[item].forEach(function (i) {\n      if (res.indexOf(i[1]) === -1) {\n        res.push(i[1]);\n      }\n    });\n  });\n  return res;\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./examples/util.js\n ** module id = 5\n ** module chunks = 2 3 5 6\n **/","'use strict';\n\nrequire('rc-tree/assets/index.less');\n\nrequire('./draggable.less');\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _rcTree = require('rc-tree');\n\nvar _rcTree2 = _interopRequireDefault(_rcTree);\n\nvar _util = require('./util');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar Demo = _react2[\"default\"].createClass({\n  displayName: 'Demo',\n  getInitialState: function getInitialState() {\n    return {\n      gData: _util.gData,\n      autoExpandParent: true,\n      expandedKeys: ['0-0-key', '0-0-0-key', '0-0-0-0-key']\n    };\n  },\n  onDragStart: function onDragStart() {},\n  onDragEnter: function onDragEnter(info) {\n    // console.log(info);\n    this.setState({\n      expandedKeys: info.expandedKeys\n    });\n  },\n  onDrop: function onDrop(info) {\n    var dropKey = info.node.props.eventKey;\n    var dragKey = info.dragNode.props.eventKey;\n    // const dragNodesKeys = info.dragNodesKeys;\n    var loop = function loop(data, key, callback) {\n      data.forEach(function (item, index, arr) {\n        if (item.key === key) {\n          return callback(item, index, arr);\n        }\n        if (item.children) {\n          return loop(item.children, key, callback);\n        }\n      });\n    };\n    var data = [].concat(_toConsumableArray(this.state.gData));\n    var dragObj = void 0;\n    loop(data, dragKey, function (item, index, arr) {\n      arr.splice(index, 1);\n      dragObj = item;\n    });\n    if (info.dropToGap) {\n      var ar = void 0;\n      var i = void 0;\n      loop(data, dropKey, function (item, index, arr) {\n        ar = arr;\n        i = index;\n      });\n      ar.splice(i, 0, dragObj);\n    } else {\n      loop(data, dropKey, function (item) {\n        item.children = item.children || [];\n        // where to insert 示例添加到尾部，可以是随意位置\n        item.children.push(dragObj);\n      });\n    }\n    this.setState({\n      gData: data,\n      expandedKeys: info.rawExpandedKeys.concat([info.node.props.eventKey])\n    });\n  },\n  onExpand: function onExpand(expandedKeys) {\n    console.log('onExpand', arguments);\n    this.setState({\n      expandedKeys: expandedKeys,\n      autoExpandParent: false\n    });\n  },\n  render: function render() {\n    var loop = function loop(data) {\n      return data.map(function (item) {\n        if (item.children) {\n          return _react2[\"default\"].createElement(\n            _rcTree.TreeNode,\n            { key: item.key, title: item.title },\n            loop(item.children)\n          );\n        }\n        return _react2[\"default\"].createElement(_rcTree.TreeNode, { key: item.key, title: item.title });\n      });\n    };\n    return _react2[\"default\"].createElement(\n      'div',\n      { className: 'draggable-demo' },\n      _react2[\"default\"].createElement(\n        'h2',\n        null,\n        'draggable '\n      ),\n      _react2[\"default\"].createElement(\n        'p',\n        null,\n        'drag a node into another node'\n      ),\n      _react2[\"default\"].createElement(\n        'div',\n        { className: 'draggable-container' },\n        _react2[\"default\"].createElement(\n          _rcTree2[\"default\"],\n          { expandedKeys: this.state.expandedKeys,\n            onExpand: this.onExpand, autoExpandParent: this.state.autoExpandParent,\n            draggable: true,\n            onDragStart: this.onDragStart,\n            onDragEnter: this.onDragEnter,\n            onDrop: this.onDrop\n          },\n          loop(this.state.gData)\n        )\n      )\n    );\n  }\n});\n\n_reactDom2[\"default\"].render(_react2[\"default\"].createElement(Demo, null), document.getElementById('__react-content'));\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./examples/draggable.js\n ** module id = 10\n ** module chunks = 5\n **/","// removed by extract-text-webpack-plugin\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./examples/draggable.less\n ** module id = 11\n ** module chunks = 5\n **/"],"sourceRoot":""}