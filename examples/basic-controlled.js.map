{"version":3,"sources":["webpack:///./examples/basic-controlled.js","webpack:///./examples/util.js"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,uCAAsC,uCAAuC,kBAAkB;;AAE/F;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B;AAC3B;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;AACA;AACA,eAAc,wBAAwB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb,yEAAwE;AACxE;AACA;AACA;AACA,oEAAmE,mCAAmC;AACtG,QAAO;AACP;AACA;AACA;AACA;AACA,QAAO,SAAS,oBAAoB,EAAE;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,2EAA0E;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,gCAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,8FAA6F;AAC7F;AACA;AACA;AACA;AACA,EAAC;;AAED,wH;;;;;;ACpJA;;AAEA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,oBAAmB,OAAO;AAC1B;AACA,iBAAgB,2CAA2C;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA,YAAW;AACX;;AAEA,4BAA2B,qBAAqB;AAChD;AACA;AACA,QAAO;AACP;AACA;;AAEA,kBAAiB,qBAAqB;AACtC;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;AACA,E","file":"basic-controlled.js","sourcesContent":["'use strict';\n\nrequire('rc-tree/assets/index.less');\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _rcTree = require('rc-tree');\n\nvar _rcTree2 = _interopRequireDefault(_rcTree);\n\nvar _util = require('./util');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar Demo = _react2[\"default\"].createClass({\n  displayName: 'Demo',\n\n  propTypes: {\n    multiple: _react.PropTypes.bool\n  },\n  getDefaultProps: function getDefaultProps() {\n    return {\n      multiple: true\n    };\n  },\n  getInitialState: function getInitialState() {\n    return {\n      // expandedKeys: getFilterExpandedKeys(gData, ['0-0-0-key']),\n      expandedKeys: ['0-0-0-key'],\n      autoExpandParent: true,\n      // checkedKeys: ['0-0-0-0-key', '0-0-1-0-key', '0-1-0-0-key'],\n      checkedKeys: ['0-0-0-key'],\n      checkStrictlyKeys: {},\n      selectedKeys: []\n    };\n  },\n  onExpand: function onExpand(expandedKeys) {\n    console.log('onExpand', arguments);\n    // if not set autoExpandParent to false, if children expanded, parent can not collapse.\n    // or, you can remove all expanded chilren keys.\n    this.setState({\n      expandedKeys: expandedKeys,\n      autoExpandParent: false\n    });\n  },\n  onCheck: function onCheck(checkedKeys) {\n    this.setState({\n      checkedKeys: checkedKeys\n    });\n  },\n  onCheckStrictly: function onCheckStrictly(checkedKeys) /* extra*/{\n    console.log(arguments);\n    // const { checkedNodesPositions } = extra;\n    // const pps = filterParentPosition(checkedNodesPositions.map(i => i.pos));\n    // console.log(checkedNodesPositions.filter(i => pps.indexOf(i.pos) > -1).map(i => i.node.key));\n    var cks = {\n      checked: checkedKeys.checked || checkedKeys,\n      halfChecked: ['0-0-' + parseInt(Math.random() * 3, 10) + '-key']\n    };\n    this.setState({\n      // checkedKeys,\n      checkStrictlyKeys: cks\n    });\n  },\n  // checkStrictlyKeys: checkedKeys,\n  onSelect: function onSelect(selectedKeys, info) {\n    console.log('onSelect', selectedKeys, info);\n    this.setState({\n      selectedKeys: selectedKeys\n    });\n  },\n  onRbSelect: function onRbSelect(selectedKeys, info) {\n    var _selectedKeys = selectedKeys;\n    if (info.selected) {\n      _selectedKeys = (0, _util.getRadioSelectKeys)(_util.gData, selectedKeys, info.node.props.eventKey);\n    }\n    this.setState({\n      selectedKeys: _selectedKeys\n    });\n  },\n  render: function render() {\n    var loop = function loop(data) {\n      return data.map(function (item) {\n        if (item.children) {\n          return _react2[\"default\"].createElement(\n            _rcTree.TreeNode,\n            { key: item.key, title: item.title,\n              disableCheckbox: item.key === '0-0-0-key' ? true : false },\n            loop(item.children)\n          );\n        }\n        return _react2[\"default\"].createElement(_rcTree.TreeNode, { key: item.key, title: item.title });\n      });\n    };\n    // console.log(getRadioSelectKeys(gData, this.state.selectedKeys));\n    return _react2[\"default\"].createElement(\n      'div',\n      { style: { padding: '0 20px' } },\n      _react2[\"default\"].createElement(\n        'h2',\n        null,\n        'controlled'\n      ),\n      _react2[\"default\"].createElement(\n        _rcTree2[\"default\"],\n        { checkable: true, multiple: this.props.multiple,\n          onExpand: this.onExpand, expandedKeys: this.state.expandedKeys,\n          autoExpandParent: this.state.autoExpandParent,\n          onCheck: this.onCheck, checkedKeys: this.state.checkedKeys,\n          onSelect: this.onSelect, selectedKeys: this.state.selectedKeys },\n        loop(_util.gData)\n      ),\n      _react2[\"default\"].createElement(\n        'h2',\n        null,\n        'checkStrictly'\n      ),\n      _react2[\"default\"].createElement(\n        _rcTree2[\"default\"],\n        { checkable: true, multiple: this.props.multiple, defaultExpandAll: true,\n          onExpand: this.onExpand, expandedKeys: this.state.expandedKeys,\n          onCheck: this.onCheckStrictly,\n          checkedKeys: this.state.checkStrictlyKeys,\n          checkStrictly: true },\n        loop(_util.gData)\n      ),\n      _react2[\"default\"].createElement(\n        'h2',\n        null,\n        'radio\\'s behavior select (in the same level)'\n      ),\n      _react2[\"default\"].createElement(\n        _rcTree2[\"default\"],\n        { multiple: true, defaultExpandAll: true,\n          onSelect: this.onRbSelect,\n          selectedKeys: (0, _util.getRadioSelectKeys)(_util.gData, this.state.selectedKeys) },\n        loop(_util.gData)\n      )\n    );\n  }\n});\n\n_reactDom2[\"default\"].render(_react2[\"default\"].createElement(Demo, null), document.getElementById('__react-content'));\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./examples/basic-controlled.js\n ** module id = 4\n ** module chunks = 2\n **/","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.generateData = generateData;\nexports.calcTotal = calcTotal;\nexports.isInclude = isInclude;\nexports.filterParentPosition = filterParentPosition;\nexports.getFilterExpandedKeys = getFilterExpandedKeys;\nexports.getRadioSelectKeys = getRadioSelectKeys;\n/* eslint no-loop-func: 0*/\n\nfunction generateData() {\n  var x = arguments.length <= 0 || arguments[0] === undefined ? 3 : arguments[0];\n  var y = arguments.length <= 1 || arguments[1] === undefined ? 2 : arguments[1];\n  var z = arguments.length <= 2 || arguments[2] === undefined ? 1 : arguments[2];\n  var gData = arguments.length <= 3 || arguments[3] === undefined ? [] : arguments[3];\n\n  // x：每一级下的节点总数。y：每级节点里有y个节点、存在子节点。z：树的level层级数（0表示一级）\n  function _loop(_level, _preKey, _tns) {\n    var preKey = _preKey || '0';\n    var tns = _tns || gData;\n\n    var children = [];\n    for (var i = 0; i < x; i++) {\n      var key = preKey + '-' + i;\n      tns.push({ title: key + '-label', key: key + '-key' });\n      if (i < y) {\n        children.push(key);\n      }\n    }\n    if (_level < 0) {\n      return tns;\n    }\n    var __level = _level - 1;\n    children.forEach(function (key, index) {\n      tns[index].children = [];\n      return _loop(__level, key, tns[index].children);\n    });\n  }\n  _loop(z);\n  return gData;\n}\nfunction calcTotal() {\n  var x = arguments.length <= 0 || arguments[0] === undefined ? 3 : arguments[0];\n  var y = arguments.length <= 1 || arguments[1] === undefined ? 2 : arguments[1];\n  var z = arguments.length <= 2 || arguments[2] === undefined ? 1 : arguments[2];\n\n  /* eslint no-param-reassign:0*/\n  var rec = function rec(n) {\n    return n >= 0 ? x * Math.pow(y, n--) + rec(n) : 0;\n  };\n  return rec(z + 1);\n}\nconsole.log('总节点数（单个tree）：', calcTotal());\n// 性能测试：总节点数超过 2000（z要小）明显感觉慢。z 变大时，递归多，会卡死。\n\nvar gData = exports.gData = generateData();\n\nfunction isInclude(smallArray, bigArray) {\n  return smallArray.every(function (ii, i) {\n    return ii === bigArray[i];\n  });\n}\n// console.log(isInclude(['0', '1'], ['0', '10', '1']));\n\n// arr.length === 628, use time: ~20ms\nfunction filterParentPosition(arr) {\n  var levelObj = {};\n  arr.forEach(function (item) {\n    var posLen = item.split('-').length;\n    if (!levelObj[posLen]) {\n      levelObj[posLen] = [];\n    }\n    levelObj[posLen].push(item);\n  });\n  var levelArr = Object.keys(levelObj).sort();\n\n  var _loop2 = function _loop2(i) {\n    if (levelArr[i + 1]) {\n      levelObj[levelArr[i]].forEach(function (ii) {\n        var _loop3 = function _loop3(j) {\n          levelObj[levelArr[j]].forEach(function (_i, index) {\n            if (isInclude(ii.split('-'), _i.split('-'))) {\n              levelObj[levelArr[j]][index] = null;\n            }\n          });\n          levelObj[levelArr[j]] = levelObj[levelArr[j]].filter(function (p) {\n            return p;\n          });\n        };\n\n        for (var j = i + 1; j < levelArr.length; j++) {\n          _loop3(j);\n        }\n      });\n    }\n  };\n\n  for (var i = 0; i < levelArr.length; i++) {\n    _loop2(i);\n  }\n  var nArr = [];\n  levelArr.forEach(function (i) {\n    nArr = nArr.concat(levelObj[i]);\n  });\n  return nArr;\n}\n// console.log(filterParentPosition(['0-2', '0-3-3', '0-10', '0-10-0', '0-0-1', '0-0', '0-1-1', '0-1']));\n\nfunction loopData(data, callback) {\n  var loop = function loop(d) {\n    var level = arguments.length <= 1 || arguments[1] === undefined ? 0 : arguments[1];\n\n    d.forEach(function (item, index) {\n      var pos = level + '-' + index;\n      if (item.children) {\n        loop(item.children, pos);\n      }\n      callback(item, index, pos);\n    });\n  };\n  loop(data);\n}\n\nfunction spl(str) {\n  return str.split('-');\n}\nfunction splitLen(str) {\n  return str.split('-').length;\n}\n\nfunction getFilterExpandedKeys(data, expandedKeys) {\n  var expandedPosArr = [];\n  loopData(data, function (item, index, pos) {\n    if (expandedKeys.indexOf(item.key) > -1) {\n      expandedPosArr.push(pos);\n    }\n  });\n  var filterExpandedKeys = [];\n  loopData(data, function (item, index, pos) {\n    expandedPosArr.forEach(function (p) {\n      if ((splitLen(pos) < splitLen(p) && p.indexOf(pos) === 0 || pos === p) && filterExpandedKeys.indexOf(item.key) === -1) {\n        filterExpandedKeys.push(item.key);\n      }\n    });\n  });\n  return filterExpandedKeys;\n}\n\nfunction isSibling(pos, pos1) {\n  pos.pop();\n  pos1.pop();\n  return pos.join(',') === pos1.join(',');\n}\n\nfunction getRadioSelectKeys(data, selectedKeys, key) {\n  var res = [];\n  var pkObjArr = [];\n  var selPkObjArr = [];\n  loopData(data, function (item, index, pos) {\n    if (selectedKeys.indexOf(item.key) > -1) {\n      pkObjArr.push([pos, item.key]);\n    }\n    if (key && key === item.key) {\n      selPkObjArr.push(pos, item.key);\n    }\n  });\n  var lenObj = {};\n  var getPosKey = function getPosKey(pos, k) {\n    var posLen = splitLen(pos);\n    if (!lenObj[posLen]) {\n      lenObj[posLen] = [[pos, k]];\n    } else {\n      lenObj[posLen].forEach(function (pkArr, i) {\n        if (isSibling(spl(pkArr[0]), spl(pos))) {\n          // 后来覆盖前者\n          lenObj[posLen][i] = [pos, k];\n        } else if (spl(pkArr[0]) !== spl(pos)) {\n          lenObj[posLen].push([pos, k]);\n        }\n      });\n    }\n  };\n  pkObjArr.forEach(function (pk) {\n    getPosKey(pk[0], pk[1]);\n  });\n  if (key) {\n    getPosKey(selPkObjArr[0], selPkObjArr[1]);\n  }\n\n  Object.keys(lenObj).forEach(function (item) {\n    lenObj[item].forEach(function (i) {\n      if (res.indexOf(i[1]) === -1) {\n        res.push(i[1]);\n      }\n    });\n  });\n  return res;\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./examples/util.js\n ** module id = 5\n ** module chunks = 2 3 5 6\n **/"],"sourceRoot":""}