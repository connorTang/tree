{"version":3,"sources":["webpack:///./examples/util.js?9121**","webpack:///./examples/dropdown.js","webpack:///./examples/dropdown.less?7a9a"],"names":[],"mappings":";;;;;;;;;;;;;AAAA;;AAEA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,oBAAmB,OAAO;AAC1B;AACA,iBAAgB,2CAA2C;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA,YAAW;AACX;;AAEA,4BAA2B,qBAAqB;AAChD;AACA;AACA,QAAO;AACP;AACA;;AAEA,kBAAiB,qBAAqB;AACtC;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;AACA,E;;;;;;;ACxMA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,uCAAsC,uCAAuC,kBAAkB;;AAE/F;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,GAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,uBAAsB;AACtB;AACA,qDAAoD;;AAEpD;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,wBAAuB,gBAAgB;AACvC;AACA,MAAK;AACL,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,iCAAiC;AAC9C;AACA;AACA;AACA,oEAAmE,iCAAiC;AACpG,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,kDAAiD,4EAA4E;AAC7H;AACA;AACA;AACA;AACA;AACA,yEAAwE;AACxE;AACA;AACA;;AAEA;AACA;AACA,QAAO,SAAS,uBAAuB,EAAE;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,oDAAmD;AACnD;AACA;AACA,YAAW,qCAAqC;AAChD;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED,wH;;;;;;;AC7RA,0C","file":"dropdown.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.generateData = generateData;\nexports.calcTotal = calcTotal;\nexports.isInclude = isInclude;\nexports.filterParentPosition = filterParentPosition;\nexports.getFilterExpandedKeys = getFilterExpandedKeys;\nexports.getRadioSelectKeys = getRadioSelectKeys;\n/* eslint no-loop-func: 0*/\n\nfunction generateData() {\n  var x = arguments.length <= 0 || arguments[0] === undefined ? 3 : arguments[0];\n  var y = arguments.length <= 1 || arguments[1] === undefined ? 2 : arguments[1];\n  var z = arguments.length <= 2 || arguments[2] === undefined ? 1 : arguments[2];\n  var gData = arguments.length <= 3 || arguments[3] === undefined ? [] : arguments[3];\n\n  // x：每一级下的节点总数。y：每级节点里有y个节点、存在子节点。z：树的level层级数（0表示一级）\n  function _loop(_level, _preKey, _tns) {\n    var preKey = _preKey || '0';\n    var tns = _tns || gData;\n\n    var children = [];\n    for (var i = 0; i < x; i++) {\n      var key = preKey + '-' + i;\n      tns.push({ title: key + '-label', key: key + '-key' });\n      if (i < y) {\n        children.push(key);\n      }\n    }\n    if (_level < 0) {\n      return tns;\n    }\n    var __level = _level - 1;\n    children.forEach(function (key, index) {\n      tns[index].children = [];\n      return _loop(__level, key, tns[index].children);\n    });\n  }\n  _loop(z);\n  return gData;\n}\nfunction calcTotal() {\n  var x = arguments.length <= 0 || arguments[0] === undefined ? 3 : arguments[0];\n  var y = arguments.length <= 1 || arguments[1] === undefined ? 2 : arguments[1];\n  var z = arguments.length <= 2 || arguments[2] === undefined ? 1 : arguments[2];\n\n  /* eslint no-param-reassign:0*/\n  var rec = function rec(n) {\n    return n >= 0 ? x * Math.pow(y, n--) + rec(n) : 0;\n  };\n  return rec(z + 1);\n}\nconsole.log('总节点数（单个tree）：', calcTotal());\n// 性能测试：总节点数超过 2000（z要小）明显感觉慢。z 变大时，递归多，会卡死。\n\nvar gData = exports.gData = generateData();\n\nfunction isInclude(smallArray, bigArray) {\n  return smallArray.every(function (ii, i) {\n    return ii === bigArray[i];\n  });\n}\n// console.log(isInclude(['0', '1'], ['0', '10', '1']));\n\n// arr.length === 628, use time: ~20ms\nfunction filterParentPosition(arr) {\n  var levelObj = {};\n  arr.forEach(function (item) {\n    var posLen = item.split('-').length;\n    if (!levelObj[posLen]) {\n      levelObj[posLen] = [];\n    }\n    levelObj[posLen].push(item);\n  });\n  var levelArr = Object.keys(levelObj).sort();\n\n  var _loop2 = function _loop2(i) {\n    if (levelArr[i + 1]) {\n      levelObj[levelArr[i]].forEach(function (ii) {\n        var _loop3 = function _loop3(j) {\n          levelObj[levelArr[j]].forEach(function (_i, index) {\n            if (isInclude(ii.split('-'), _i.split('-'))) {\n              levelObj[levelArr[j]][index] = null;\n            }\n          });\n          levelObj[levelArr[j]] = levelObj[levelArr[j]].filter(function (p) {\n            return p;\n          });\n        };\n\n        for (var j = i + 1; j < levelArr.length; j++) {\n          _loop3(j);\n        }\n      });\n    }\n  };\n\n  for (var i = 0; i < levelArr.length; i++) {\n    _loop2(i);\n  }\n  var nArr = [];\n  levelArr.forEach(function (i) {\n    nArr = nArr.concat(levelObj[i]);\n  });\n  return nArr;\n}\n// console.log(filterParentPosition(['0-2', '0-3-3', '0-10', '0-10-0', '0-0-1', '0-0', '0-1-1', '0-1']));\n\nfunction loopData(data, callback) {\n  var loop = function loop(d) {\n    var level = arguments.length <= 1 || arguments[1] === undefined ? 0 : arguments[1];\n\n    d.forEach(function (item, index) {\n      var pos = level + '-' + index;\n      if (item.children) {\n        loop(item.children, pos);\n      }\n      callback(item, index, pos);\n    });\n  };\n  loop(data);\n}\n\nfunction spl(str) {\n  return str.split('-');\n}\nfunction splitLen(str) {\n  return str.split('-').length;\n}\n\nfunction getFilterExpandedKeys(data, expandedKeys) {\n  var expandedPosArr = [];\n  loopData(data, function (item, index, pos) {\n    if (expandedKeys.indexOf(item.key) > -1) {\n      expandedPosArr.push(pos);\n    }\n  });\n  var filterExpandedKeys = [];\n  loopData(data, function (item, index, pos) {\n    expandedPosArr.forEach(function (p) {\n      if ((splitLen(pos) < splitLen(p) && p.indexOf(pos) === 0 || pos === p) && filterExpandedKeys.indexOf(item.key) === -1) {\n        filterExpandedKeys.push(item.key);\n      }\n    });\n  });\n  return filterExpandedKeys;\n}\n\nfunction isSibling(pos, pos1) {\n  pos.pop();\n  pos1.pop();\n  return pos.join(',') === pos1.join(',');\n}\n\nfunction getRadioSelectKeys(data, selectedKeys, key) {\n  var res = [];\n  var pkObjArr = [];\n  var selPkObjArr = [];\n  loopData(data, function (item, index, pos) {\n    if (selectedKeys.indexOf(item.key) > -1) {\n      pkObjArr.push([pos, item.key]);\n    }\n    if (key && key === item.key) {\n      selPkObjArr.push(pos, item.key);\n    }\n  });\n  var lenObj = {};\n  var getPosKey = function getPosKey(pos, k) {\n    var posLen = splitLen(pos);\n    if (!lenObj[posLen]) {\n      lenObj[posLen] = [[pos, k]];\n    } else {\n      lenObj[posLen].forEach(function (pkArr, i) {\n        if (isSibling(spl(pkArr[0]), spl(pos))) {\n          // 后来覆盖前者\n          lenObj[posLen][i] = [pos, k];\n        } else if (spl(pkArr[0]) !== spl(pos)) {\n          lenObj[posLen].push([pos, k]);\n        }\n      });\n    }\n  };\n  pkObjArr.forEach(function (pk) {\n    getPosKey(pk[0], pk[1]);\n  });\n  if (key) {\n    getPosKey(selPkObjArr[0], selPkObjArr[1]);\n  }\n\n  Object.keys(lenObj).forEach(function (item) {\n    lenObj[item].forEach(function (i) {\n      if (res.indexOf(i[1]) === -1) {\n        res.push(i[1]);\n      }\n    });\n  });\n  return res;\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./examples/util.js\n ** module id = 5\n ** module chunks = 2 3 5 6\n **/","'use strict';\n\nrequire('rc-tree/assets/index.less');\n\nrequire('./dropdown.less');\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _rcTree = require('rc-tree');\n\nvar _rcTree2 = _interopRequireDefault(_rcTree);\n\nvar _rcTrigger = require('rc-trigger');\n\nvar _rcTrigger2 = _interopRequireDefault(_rcTrigger);\n\nvar _util = require('./util');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar placements = {\n  topLeft: {\n    points: ['bl', 'tl'],\n    overflow: {\n      adjustX: 1,\n      adjustY: 1\n    },\n    offset: [0, -3],\n    targetOffset: [0, 0]\n  },\n  bottomLeft: {\n    points: ['tl', 'bl'],\n    overflow: {\n      adjustX: 1,\n      adjustY: 1\n    },\n    offset: [0, 3],\n    targetOffset: [0, 0]\n  }\n}; /* eslint react/no-multi-comp:0 */\n\nvar DropdownTree = _react2[\"default\"].createClass({\n  displayName: 'DropdownTree',\n\n  propTypes: {\n    minOverlayWidthMatchTrigger: _react.PropTypes.bool,\n    onVisibleChange: _react.PropTypes.func,\n    prefixCls: _react.PropTypes.string,\n    children: _react.PropTypes.any,\n    transitionName: _react.PropTypes.string,\n    overlayClassName: _react.PropTypes.string,\n    animation: _react.PropTypes.any,\n    align: _react.PropTypes.object,\n    overlayStyle: _react.PropTypes.object,\n    placement: _react.PropTypes.string,\n    trigger: _react.PropTypes.array\n  },\n  getDefaultProps: function getDefaultProps() {\n    return {\n      minOverlayWidthMatchTrigger: true,\n      prefixCls: 'demo-dropdown-tree',\n      trigger: ['hover'],\n      overlayClassName: '',\n      overlayStyle: {},\n      defaultVisible: false,\n      onVisibleChange: function onVisibleChange() {},\n\n      placement: 'bottomLeft'\n    };\n  },\n  getInitialState: function getInitialState() {\n    var props = this.props;\n    if ('visible' in props) {\n      return {\n        visible: props.visible\n      };\n    }\n    return {\n      visible: props.defaultVisible\n    };\n  },\n  componentWillReceiveProps: function componentWillReceiveProps(props) {\n    if ('visible' in props) {\n      this.setState({\n        visible: props.visible\n      });\n    }\n  },\n  onChange: function onChange(value) {\n    console.log('change', value);\n  },\n  onSelect: function onSelect(value) {\n    console.log('select ', value);\n  },\n  onClick: function onClick(e) {\n    var props = this.props;\n    var overlayProps = props.overlay.props;\n    if (!('visible' in props)) {\n      this.setState({\n        visible: false\n      });\n    }\n    if (overlayProps.onClick) {\n      overlayProps.onClick(e);\n    }\n  },\n  onVisibleChange: function onVisibleChange(v) {\n    var props = this.props;\n    if (!('visible' in props)) {\n      this.setState({\n        visible: v\n      });\n    }\n    props.onVisibleChange(v);\n  },\n  getPopupElement: function getPopupElement() {\n    var props = this.props;\n    return _react2[\"default\"].cloneElement(props.overlay, {\n      // prefixCls: `${props.prefixCls}-menu`,\n      onClick: this.onClick\n    });\n  },\n  afterVisibleChange: function afterVisibleChange(visible) {\n    if (visible && this.props.minOverlayWidthMatchTrigger) {\n      var overlayNode = this.refs.trigger.getPopupDomNode();\n      var rootNode = _reactDom2[\"default\"].findDOMNode(this);\n      if (rootNode.offsetWidth > overlayNode.offsetWidth) {\n        overlayNode.style.width = rootNode.offsetWidth + 'px';\n      }\n    }\n  },\n  render: function render() {\n    var _props = this.props;\n    var prefixCls = _props.prefixCls;\n    var children = _props.children;\n    var transitionName = _props.transitionName;\n    var animation = _props.animation;\n    var align = _props.align;\n    var placement = _props.placement;\n    var overlayClassName = _props.overlayClassName;\n    var overlayStyle = _props.overlayStyle;\n    var trigger = _props.trigger;\n\n    return _react2[\"default\"].createElement(\n      _rcTrigger2[\"default\"],\n      { prefixCls: prefixCls,\n        ref: 'trigger',\n        popupClassName: overlayClassName,\n        popupStyle: overlayStyle,\n        builtinPlacements: placements,\n        action: trigger,\n        popupPlacement: placement,\n        popupAlign: align,\n        popupTransitionName: transitionName,\n        popupAnimation: animation,\n        popupVisible: this.state.visible,\n        afterPopupVisibleChange: this.afterVisibleChange,\n        popup: this.getPopupElement(),\n        onPopupVisibleChange: this.onVisibleChange\n      },\n      children\n    );\n  }\n});\n\nvar Demo = _react2[\"default\"].createClass({\n  displayName: 'Demo',\n  getInitialState: function getInitialState() {\n    return {\n      visible: false,\n      inputValue: '',\n      sel: '',\n      expandedKeys: [],\n      autoExpandParent: true\n    };\n  },\n  onChange: function onChange(event) {\n    this.filterKeys = [];\n    this.setState({\n      inputValue: event.target.value\n    });\n  },\n  onVisibleChange: function onVisibleChange(visible) {\n    this.setState({\n      visible: visible\n    });\n  },\n  onSelect: function onSelect(selectedKeys, info) {\n    console.log('selected: ', info);\n    this.setState({\n      visible: false,\n      sel: info.node.props.title\n    });\n  },\n  onExpand: function onExpand(expandedKeys) {\n    this.filterKeys = undefined;\n    console.log('onExpand', arguments);\n    // if not set autoExpandParent to false, if children expanded, parent can not collapse.\n    // or, you can remove all expanded chilren keys.\n    this.setState({\n      expandedKeys: expandedKeys,\n      autoExpandParent: false\n    });\n  },\n  filterTreeNode: function filterTreeNode(treeNode) {\n    console.log(treeNode);\n    // 根据 key 进行搜索，可以根据其他数据，如 value\n    return this.filterFn(treeNode.props.eventKey);\n  },\n  filterFn: function filterFn(key) {\n    if (this.state.inputValue && key.indexOf(this.state.inputValue) > -1) {\n      return true;\n    }\n    return false;\n  },\n  render: function render() {\n    var _this = this;\n\n    var loop = function loop(data) {\n      return data.map(function (item) {\n        if (_this.filterKeys && _this.filterFn(item.key)) {\n          _this.filterKeys.push(item.key);\n        }\n        if (item.children) {\n          return _react2[\"default\"].createElement(\n            _rcTree.TreeNode,\n            { key: item.key, title: item.key },\n            loop(item.children)\n          );\n        }\n        return _react2[\"default\"].createElement(_rcTree.TreeNode, { key: item.key, title: item.key });\n      });\n    };\n    var expandedKeys = this.state.expandedKeys;\n    var autoExpandParent = this.state.autoExpandParent;\n    if (this.filterKeys) {\n      expandedKeys = this.filterKeys;\n      autoExpandParent = true;\n    }\n\n    var overlay = _react2[\"default\"].createElement(\n      'div',\n      null,\n      _react2[\"default\"].createElement('input', { placeholder: '请筛选', value: this.state.inputValue, onChange: this.onChange }),\n      _react2[\"default\"].createElement(\n        _rcTree2[\"default\"],\n        {\n          onExpand: this.onExpand, expandedKeys: expandedKeys,\n          autoExpandParent: autoExpandParent,\n          onSelect: this.onSelect, filterTreeNode: this.filterTreeNode },\n        loop(_util.gData)\n      )\n    );\n\n    return _react2[\"default\"].createElement(\n      'div',\n      { style: { padding: '10px 30px' } },\n      _react2[\"default\"].createElement(\n        'h3',\n        null,\n        'tree in dropdown'\n      ),\n      _react2[\"default\"].createElement(\n        DropdownTree,\n        { trigger: ['click'],\n          onVisibleChange: this.onVisibleChange,\n          visible: this.state.visible,\n          closeOnSelect: false,\n          overlay: overlay, animation: 'slide-up' },\n        _react2[\"default\"].createElement(\n          'div',\n          { className: 'demo-dropdown-trigger' },\n          this.state.sel\n        )\n      )\n    );\n  }\n});\n\n_reactDom2[\"default\"].render(_react2[\"default\"].createElement(Demo, null), document.getElementById('__react-content'));\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./examples/dropdown.js\n ** module id = 12\n ** module chunks = 6\n **/","// removed by extract-text-webpack-plugin\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./examples/dropdown.less\n ** module id = 13\n ** module chunks = 6\n **/"],"sourceRoot":""}